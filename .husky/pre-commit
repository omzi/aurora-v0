#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ðŸš€ Initiating code checks..."

# Check Prettier standards on staged files
git diff --staged --name-only --diff-filter=ACMRTUXB | grep -E "\.(ts|tsx|js)$" | xargs npx prettier --check ||
(
	echo "ðŸš¨ Whoops! Code style violation detected ðŸ¤–. Fix it with `npm run format`, add changes, and try again.";
	false;
)

# Check ESLint standards on staged files
git diff --staged --name-only --diff-filter=ACMRTUXB | grep -E "\.(ts|tsx|js)$" | xargs npx eslint --format=pretty ||
(
	echo "ðŸš« Hold up! ESLint is not impressed ðŸ¤”. Make the necessary changes, add them, and attempt the commit once more."
	false;
)

# If everything passes... Now we can commit
echo "âœ… Code checks successful! ðŸ¤– Initiating commit sequence..."
